---
import DesktopLayout from '../layouts/DesktopLayout.astro';

import AboutWindow from '../components/AboutWindow.astro';
import CatPhotoWindow from '../components/CatPhotoWindow.astro';
import CDPlayerWindow from '../components/CDPlayerWindow.astro';
import WebMusicWindow from '../components/WebMusicWindow.astro';
import HelpWindow from '../components/HelpWindow.astro';
import ginger0 from '../assets/cats/ginger0.jpg';
import wally0 from '../assets/cats/wally0.jpg';

import startup from '../assets/audio/ms_sound.wav';
---

<DesktopLayout>
	<audio id="startup-audio" src={startup}></audio>

	<AboutWindow
		id="about-window"
		width="600px"
		height="800px"
	/>

	<CatPhotoWindow
		id="cat-window"
		src={ginger0.src}
		alt="Ginger cat"
		title="ginger.jpg"
		height="600px"
	/>
	
	<CatPhotoWindow
		id="cat-window1"
		src={wally0.src}
		alt="Wally cat"
		title="wally.jpg"
		height="600px"
	/>

	<CDPlayerWindow 
		id="cd-player-window"
		height="270px"
		width="400px"
	/>

	<WebMusicWindow 
		id="music-window"
		title="Song of the Temporal Unit - The Internet"
	/>

	<HelpWindow
		id="help-window"
		width="500px"
		height="400px"
	/>

</DesktopLayout>

<script>
	let playedStartup = false;

	const helpWindow = document.getElementById('help-window') as HTMLElement;
	helpWindow!.style.display = 'block';
	helpWindow!.style.top = `calc(50vh - 200px)`;
	helpWindow!.style.right = '10%';
	helpWindow!.style.zIndex = '3';

	const aboutWindow = document.getElementById('about-window') as HTMLElement;
	aboutWindow!.style.display = 'block';
	aboutWindow!.style.top = `calc(50vh - 400px)`;
	aboutWindow!.style.right = 'calc(10% + 550px)';
	aboutWindow!.style.zIndex = '4';

	window.addEventListener('click', () => {
		if(!playedStartup)
			(document.getElementById('startup-audio') as HTMLMediaElement).play()

		playedStartup = true;
	});

</script>